<link rel="stylesheet" href="/css/attachment.css">

<main>
    <div class="container-fluid bg-grey">
        <div class="row">
            <!-- Side bar -->
            {{> sidebar}}
            <!-- Main content -->
            <div class="col-md-11 col-lg-11 col-xl-11 bg-grey px-4">
                {{> project-nav-bar}}
                <div class="container-fluid bg-light rounded-3">
                    <div class="align-items-center d-flex">
                        <div class="d-inline-block">
                            <h5 class="ms-4 my-3">Attachments</h5>
                        </div>
                        <div class="d-inline-block ms-auto fw-bold d-flex align-items-center">
                            <div class="mx-3">
                                <i class="bi bi-book"></i>
                                <span class="fw-bold">Guide</span>
                            </div>
                        </div>

                        <div class="d-inline-block me-3" id="open-attachment-popup">
                            <div class="mx-4 my-3 d-flex btn custom-bold-btn">
                                <div class="me-2 p-1">
                                    <i class="bi bi-plus"></i>
                                    Upload
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container-fluid bg-light rounded-3">
                        {{#if attachments}}
                        <div class="attachment-list">
                            {{#each attachments}}
                            <div class="attachment-item" data-id="{{this.id}}">
                                <button class="delete-btn" onclick="deleteAttachment('{{this.id}}')">
                                    <i class="bi bi-trash"></i>
                                </button>
                                <a href="{{this.data_link}}" download="{{this.filename}}" class="attachment-link">
                                    <i class="bi bi-file-earmark"></i> {{this.filename}}
                                </a>
                            </div>
                            {{/each}}
                        </div>


                        {{else}}
                        <p>No attachments found.</p>
                        {{/if}}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="attachmentPopup" class="position-fixed overlay top-0 bottom-0 start-0 end-0">
        <div class="d-flex justify-content-center align-items-center w-100 position-absolute top-0 bottom-0 start-0 end-0">
            <div class="w-50 shadow bg-white rounded-4">
                <div class="m-2 mt-2 bg-white semi-rounded">
                    <div class="container p-4 position-relative">
                        <h6 class="text-left fs-4">Upload Attachment</h6>
                        <input type="file" id="attachmentFileInput" accept="image/*" class="form-control">
                        <div class="d-flex justify-content-center mt-4">
                            <div class="ps-3 pe-3 ms-4 d-flex btn save-btn" id="customSaveAttachment">
                                Save
                            </div>
                            <div class="closePopup btn text-center ps-3 pe-3 ms-4 cancel-btn">
                                Cancel
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
        integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
        crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="/js/toast.js"></script>
<script src="/js/upload-attachment.js"></script>
<script src="/js/delete-attachment.js"></script>
