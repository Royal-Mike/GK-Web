
<link rel="stylesheet" href="/css/profile.css">


<body>
    <main>
        <!-- Page hiện tại -->
        <div class="container-fluid">
            <div class="row">
                <!-- Side bar -->
                {{> sidebar}}
                <!-- Main content -->
                <div class="content-box col-md-11 mx-auto px-4">
                    <div class="white-container">
                        <div class="account-settings">
                            <h2>My Account</h2>
                            <ul class="nav nav-tabs">
                                <li><a href="#">Profile</a></li>
                                <!--
                                <li><a href="#">Personalisation</a></li>
                                <li><a href="#">Account</a></li>
                                <li><a href="#">Payment Methods</a></li>
                                <li><a href="#">Notifications</a></li>
                                <li><a href="#">Privacy</a></li>
                                 -->
                            </ul>
                            <!-- Profile Section -->
                            <div id="profile" class="tab-content">
                                <!-- Avatar -->
                                <div class="avatar-icon-container">
                                    <div class="avatar-wrapper">
                                        <img src="{{user.avatar}}" alt="User Avatar" class="avatar" id="user-avatar">
                                        <div class="icon-wrapper bg-grey">
                                            <button class="icon-button" id="open-avatar-popup">
                                                <i class="bi bi-camera-fill fs-5"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Form for updating profile information -->
                                <form action="/update-profile" method="post">
                                    <!-- First Name -->
                                    <label for="first-name">First Name:</label>
                                    <input type="text" id="first-name" name="first_name" value="{{ user.firstname }}"><br>

                                    <!-- Last Name -->
                                    <label for="last-name">Last Name:</label>
                                    <input type="text" id="last-name" name="last_name" value="{{ user.lastname }}"><br>

                                    <!-- Headline -->
                                    <label for="headline">Headline:</label>
                                    <input type="text" id="headline" name="headline" value="{{ user.headline }}"><br>

                                    <!-- Language Selection Dropdown -->
                                    <label for="language">Language:</label>
                                    <select id="language" name="language">
                                        <option value="vn" {{#if (eq user.language 'vn')}} selected{{/if}}>Vietnamese</option>
                                        <option value="en" {{#if (eq user.language 'en')}} selected{{/if}}>English</option>
                                        <option value="fr" {{#if (eq user.language 'fr')}} selected{{/if}}>Francais</option>
                                    </select>
                                    <br>

                                    <!-- Link -->
                                    <label for="link">Link:</label>
                                    <input type="text" id="link" name="link" value="{{ user.website_link }}"><br>

                                    <!-- Save Button -->
                                    <button type="button" class="save-button" id="btn-save-profile">Save</button>
                                </form>

                                <!-- Placeholder for updated profile information -->
                                <div id="updated-profile-info"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="avatarPopup" class="position-fixed overlay top-0 bottom-0 start-0 end-0 ">
            <div class="d-flex justify-content-center align-items-center w-100 position-absolute top-0 bottom-0 start-0 end-0">
                <div class="w-50 shadow bg-white rounded-4">
                    <div class="m-2 mt-2 bg-white semi-rounded">
                        <div class="container p-4 position-relative">
                            <h6 class="text-left fs-4">Upload Avatar</h6>
                            <input type="file" id="avatarFileInput" accept="image/*" class="form-control">
                            <div class="d-flex justify-content-center mt-4">
                                <div class="ps-3 pe-3 ms-4 d-flex btn save-btn" id="customSaveAvatar">
                                    Save
                                </div>
                                <div class="closePopup btn text-center ps-3 pe-3 ms-4 cancel-btn">
                                    Cancel
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <!-- Toast -->
    <div class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header">
            <strong class="me-auto">Thông báo</strong>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body">
            Profile đã được cập nhật thành công.
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
            integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
            crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="/js/toast.js"></script>
    <script src="/js/save-profile.js"></script>
    <script src="/js/upload-avatar.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</body>
